---
description: Verify layout interdependencies when changing CSS positioning models
globs: "**/*.tsx"
alwaysApply: false
---

# Layout Contracts

When changing a component's CSS positioning model (`absolute`, `relative`, `fixed`, `sticky`, `flex`, `grid`), trace the layout impact to the **parent container** and **all sibling components**.

## Checklist

Before committing a positioning change:

1. **Identify the layout parent** — what container holds this component?
2. **List all siblings** — what other components share that container?
3. **Verify resize behaviour** — do siblings grow/shrink correctly when this component changes size?
4. **Check overflow** — does scrollable content still scroll? Does the map/canvas still fill available space?
5. **Test at all breakpoints** — does the layout hold at small, medium, and large viewports?

## Concrete Example: Map + Bottom Sheet

```tsx
// ❌ BAD — absolute overlay hides content beneath it; map does not resize
<div className="flex-1 relative min-w-0 min-h-0">
  <MapCanvas />              {/* Takes 100% of container */}
  <LgaBottomSheet            {/* Overlays map, map stays full-height */}
    className="absolute bottom-0 left-0 right-0 z-20"
  />
</div>

// ✅ GOOD — flex column; map shrinks as bottom sheet grows
<div className="flex-1 flex flex-col min-w-0 min-h-0">
  <div className="flex-1 min-h-0">
    <MapCanvas />            {/* Shrinks to remaining space */}
  </div>
  <LgaBottomSheet            {/* Normal flow; takes its height */}
    className="shrink-0"
  />
</div>
```

## Key Patterns

- **Absolute children do not affect parent height.** Siblings beneath them are occluded, not resized.
- **Flex children with `flex-1 min-h-0`** will shrink when a `shrink-0` sibling is added.
- When converting from overlay to split-pane, ensure the resizable sibling (e.g. a map) has `min-h-0` so it can shrink below its intrinsic height.
